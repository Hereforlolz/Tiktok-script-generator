<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI TikTok Script Generator Pro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .panel {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }

        .panel:hover {
            transform: translateY(-5px);
        }

        .panel h2 {
            color: #4a5568;
            margin-bottom: 20px;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        label {
            font-weight: 600;
            color: #4a5568;
        }

        select, input, textarea {
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        select:focus, input:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #38b2ac, #4fd1c7);
        }

        .btn-warning {
            background: linear-gradient(135deg, #ed8936, #f6ad55);
        }

        .news-item {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .news-item:hover {
            background: #edf2f7;
            border-color: #cbd5e0;
        }

        .news-item.selected {
            background: #e6fffa;
            border-color: #38b2ac;
        }

        .news-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: #2d3748;
        }

        .news-source {
            font-size: 0.9rem;
            color: #718096;
            margin-bottom: 5px;
        }

        .news-keywords {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        .keyword-tag {
            background: #bee3f8;
            color: #2b6cb0;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
        }

        .script-output {
            background: #1a202c;
            color: #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            line-height: 1.6;
            max-height: 500px;
            overflow-y: auto;
        }

        .loading {
            text-align: center;
            color: #718096;
            font-style: italic;
        }

        .sketch-formats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .format-card {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .format-card:hover {
            border-color: #667eea;
            background: #edf2f7;
        }

        .format-card.selected {
            border-color: #667eea;
            background: #e6fffa;
        }

        .format-emoji {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .format-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .format-desc {
            font-size: 0.9rem;
            color: #718096;
        }

        .api-config {
            background: #fef5e7;
            border: 1px solid #f6ad55;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .api-config h3 {
            color: #c05621;
            margin-bottom: 10px;
        }

        .viral-tools {
            background: #f0fff4;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .viral-section {
            margin-bottom: 15px;
        }

        .viral-section h4 {
            color: #38a169;
            margin-bottom: 8px;
        }

        .hashtag-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .hashtag {
            background: #c6f6d5;
            color: #22543d;
            padding: 4px 12px;
            border-radius: 16px;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .hashtag:hover {
            background: #9ae6b4;
        }

        .thumbnail-ideas {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }

        .thumbnail-card {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .news-filters {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 1px solid #cbd5e0;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .filter-btn:hover, .filter-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        /* Mode Selector Styling */
        .mode-selector {
            background: white;
            border-radius: 15px;
            padding: 15px 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .mode-selector label {
            font-weight: 600;
            color: #4a5568;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .mode-selector input[type="radio"] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid #667eea;
            border-radius: 50%;
            position: relative;
            cursor: pointer;
            outline: none;
            transition: all 0.2s ease;
        }

        .mode-selector input[type="radio"]:checked {
            background-color: #667eea;
            border-color: #667eea;
        }

        .mode-selector input[type="radio"]:checked::before {
            content: '';
            display: block;
            width: 10px;
            height: 10px;
            background-color: white;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            .mode-selector {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ AI TikTok Script Generator Pro</h1>
            <p>Turn tech news into viral comedy gold with AI-powered scripts!</p>
        </div>

        <!-- Mode Selector -->
        <div class="mode-selector">
            <label>
                <input type="radio" name="appMode" value="demo" checked onchange="toggleMode()">
                Demo Mode (No API Keys Needed) ‚ú®
            </label>
            <label>
                <input type="radio" name="appMode" value="advanced" onchange="toggleMode()">
                Advanced Mode (Use Your API Keys) üîë
            </label>
        </div>

        <!-- API Configuration Panel - Initially hidden -->
        <div class="panel api-config" id="apiConfigPanel" style="display: none;">
            <h3>üîå AI & News API Configuration</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                <div class="input-group">
                    <label for="newsApiKey">News API Key (newsapi.org):</label>
                    <input type="password" id="newsApiKey" placeholder="Enter your News API key">
                </div>
                <div class="input-group">
                    <label for="aiProvider">AI Provider:</label>
                    <select id="aiProvider">
                        <option value="openai">OpenAI GPT</option>
                        <option value="anthropic">Anthropic Claude</option>
                        <option value="gemini">Google Gemini</option>
                        <option value="cohere">Cohere</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="aiApiKey">AI API Key:</label>
                    <input type="password" id="aiApiKey" placeholder="Enter your AI API key">
                </div>
            </div>
            <p style="margin-top: 10px; font-size: 0.9rem; color: #c05621;">
                <strong>Get API Keys:</strong> 
                <a href="https://newsapi.org" target="_blank">News API</a> | 
                <a href="https://platform.openai.com" target="_blank">OpenAI</a> | 
                <a href="https://console.anthropic.com" target="_blank">Anthropic</a> | 
                <a href="https://makersuite.google.com" target="_blank">Google AI</a> | 
                <a href="https://cohere.ai" target="_blank">Cohere</a>
            </p>
        </div>

        <div class="main-grid">
            <!-- News Panel -->
            <div class="panel">
                <h2>üì∞ Tech News</h2>
                <div class="controls">
                    <div class="input-group">
                        <label>News Sources:</label>
                        <select id="newsSource">
                            <option value="all">All Tech Sources</option>
                            <option value="techcrunch">TechCrunch</option>
                            <option value="the-verge">The Verge</option>
                            <option value="ars-technica">Ars Technica</option>
                            <option value="wired">Wired</option>
                            <option value="bloomberg">Bloomberg Tech</option>
                            <option value="business-insider">Business Insider</option>
                        </select>
                    </div>
                    
                    <div class="news-filters">
                        <div class="filter-btn active" data-filter="all">All</div>
                        <div class="filter-btn" data-filter="ai">AI</div>
                        <div class="filter-btn" data-filter="startup">Startup</div>
                        <div class="filter-btn" data-filter="crypto">Crypto</div>
                        <div class="filter-btn" data-filter="social">Social Media</div>
                        <div class="filter-btn" data-filter="mobile">Mobile</div>
                    </div>

                    <button class="btn" onclick="fetchNews()">üîÑ Fetch News</button>
                    <button class="btn btn-secondary" onclick="detectTrending()">üî• Detect Trending</button>
                    
                    <div id="newsContainer">
                        <div class="loading">Select a mode above. In Demo Mode, news will load automatically. In Advanced Mode, enter your News API key and click "Fetch News".</div>
                    </div>
                </div>
            </div>

            <!-- Script Settings Panel -->
            <div class="panel">
                <h2>üé≠ Script Generator</h2>
                <div class="controls">
                    <div class="input-group">
                        <label>Comedy Format:</label>
                        <div class="sketch-formats">
                            <div class="format-card" data-format="investor-pitch">
                                <div class="format-emoji">üí∞</div>
                                <div class="format-title">Investor Pitch</div>
                                <div class="format-desc">Pitch gone wrong</div>
                            </div>
                            <div class="format-card" data-format="ai-therapist">
                                <div class="format-emoji">ü§ñ</div>
                                <div class="format-title">AI Therapist</div>
                                <div class="format-desc">Robot therapy</div>
                            </div>
                            <div class="format-card" data-format="tech-support">
                                <div class="format-emoji">üìû</div>
                                <div class="format-title">Tech Support</div>
                                <div class="format-desc">Support hell</div>
                            </div>
                            <div class="format-card" data-format="startup-meeting">
                                <div class="format-emoji">üöÄ</div>
                                <div class="format-title">Startup Meeting</div>
                                <div class="format-desc">Buzzword bingo</div>
                            </div>
                            <div class="format-card" data-format="product-launch">
                                <div class="format-emoji">üì±</div>
                                <div class="format-title">Product Launch</div>
                                <div class="format-desc">Overhyped reveal</div>
                            </div>
                            <div class="format-card" data-format="dating-app">
                                <div class="format-emoji">‚ù§Ô∏è</div>
                                <div class="format-title">Tech Dating</div>
                                <div class="format-desc">Algorithm romance</div>
                            </div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="toneSelect">Comedy Tone:</label>
                        <select id="toneSelect">
                            <option value="absurd">Absurd & Surreal</option>
                            <option value="sarcastic">Sarcastic & Witty</option>
                            <option value="wholesome">Wholesome & Silly</option>
                            <option value="dark">Dark Comedy</option>
                            <option value="millennial">Millennial Humor</option>
                            <option value="gen-z">Gen-Z Humor</option>
                            <option value="boomer">Boomer vs Tech</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="durationSelect">Script Length:</label>
                        <select id="durationSelect">
                            <option value="15">15 seconds (Quick bit)</option>
                            <option value="30">30 seconds (Standard)</option>
                            <option value="60">60 seconds (Full sketch)</option>
                            <option value="90">90 seconds (Extended)</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="characterSelect">Character Style:</label>
                        <select id="characterSelect">
                            <option value="exaggerated">Exaggerated Personalities</option>
                            <option value="relatable">Relatable Everyday People</option>
                            <option value="corporate">Corporate Stereotypes</option>
                            <option value="generational">Generational Clash</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="customPrompt">Custom Comedy Angle:</label>
                        <textarea id="customPrompt" placeholder="Add your comedic twist, running gags, or specific elements..." rows="3"></textarea>
                    </div>

                    <button class="btn" onclick="generateScript()" id="generateBtn">üé¨ Generate Script</button>
                </div>
            </div>

            <!-- Viral Optimization Panel -->
            <div class="panel">
                <h2>üöÄ Viral Optimization</h2>
                <div class="controls">
                    <div class="input-group">
                        <label for="targetAudience">Target Audience:</label>
                        <select id="targetAudience">
                            <option value="general">General Tech Audience</option>
                            <option value="developers">Developers/Programmers</option>
                            <option value="entrepreneurs">Entrepreneurs</option>
                            <option value="students">Tech Students</option>
                            <option value="investors">Investors/VCs</option>
                            <option value="general-public">General Public</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="viralStrategy">Viral Strategy:</label>
                        <select id="viralStrategy">
                            <option value="relatable">Relatable Pain Points</option>
                            <option value="shock">Shock Value</option>
                            <option value="educational">Educational + Funny</option>
                            <option value="trending">Trending Meme Format</option>
                            <option value="controversy">Gentle Controversy</option>
                        </select>
                    </div>

                    <button class="btn btn-secondary" onclick="generateViralContent()">üéØ Generate Viral Package</button>
                    <button class="btn btn-warning" onclick="generateThumbnails()">üñºÔ∏è Generate Thumbnails</button>
                </div>

                <div id="viralContent"></div>
            </div>
        </div>

        <!-- Generated Content Section -->
        <div class="panel full-width">
            <h2>üìù Generated Script & Viral Content</h2>
            <div id="scriptOutput" class="script-output">
                Select a mode above. In Demo Mode, news will load automatically and script generation will use a simple AI. In Advanced Mode, configure your API keys, select a news story, choose your format, and click "Generate Script" to create your viral TikTok masterpiece!
            </div>
        </div>
    </div>

    <script>
        let selectedNews = null;
        let selectedFormat = null;
        let currentFilter = 'all';
        let newsData = [];
        let currentMode = 'demo'; // Default mode

        // Utility to show messages
        function showMessage(message, isError = false) {
            const output = document.getElementById('scriptOutput');
            const messageDiv = document.createElement('div');
            messageDiv.textContent = message;
            messageDiv.style.color = isError ? 'red' : 'green';
            messageDiv.style.fontWeight = 'bold';
            messageDiv.style.marginTop = '10px';
            output.prepend(messageDiv); // Add to top of output
            setTimeout(() => messageDiv.remove(), 5000);
        }

        // Initialize format selection
        document.querySelectorAll('.format-card').forEach(card => {
            card.addEventListener('click', () => {
                document.querySelectorAll('.format-card').forEach(c => c.classList.remove('selected'));
                card.classList.add('selected');
                selectedFormat = card.dataset.format;
            });
        });

        // Initialize filter buttons
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentFilter = btn.dataset.filter;
                filterNews();
            });
        });

        // Toggles between Demo and Advanced modes
        function toggleMode() {
            currentMode = document.querySelector('input[name="appMode"]:checked').value;
            const apiConfigPanel = document.getElementById('apiConfigPanel');
            const newsContainer = document.getElementById('newsContainer');
            const scriptOutput = document.getElementById('scriptOutput');

            if (currentMode === 'advanced') {
                apiConfigPanel.style.display = 'block';
                newsContainer.innerHTML = '<div class="loading">Enter your News API key and click "Fetch News".</div>';
                scriptOutput.textContent = 'Configure your API keys, select a news story, choose your format, and click "Generate Script" to create your viral TikTok masterpiece!';
            } else { // demo mode
                apiConfigPanel.style.display = 'none';
                // Automatically fetch trending news in demo mode
                detectTrending(); 
                scriptOutput.textContent = 'Select a news story and a format, then click "Generate Script" to create your viral TikTok masterpiece!';
            }
        }

        // News API Integration (now called fetchNews to be generic)
        async function fetchNews() {
            if (currentMode === 'demo') {
                detectTrending(); // In demo mode, fetch demo/trending news
                return;
            }

            // Advanced Mode: Use actual News API
            const apiKey = document.getElementById('newsApiKey').value;
            if (!apiKey) {
                showMessage('Please enter your News API key first for Advanced Mode!', true);
                return;
            }

            const container = document.getElementById('newsContainer');
            container.innerHTML = '<div class="loading">üîÑ Fetching latest tech news...</div>';

            const source = document.getElementById('newsSource').value;
            const sources = source === 'all' ? 'techcrunch,the-verge,ars-technica,wired,bloomberg,business-insider' : source;

            try {
                const response = await fetch(`https://newsapi.org/v2/top-headlines?sources=${sources}&apiKey=${apiKey}`);
                const data = await response.json();
                
                if (data.status === 'ok') {
                    newsData = data.articles.map(article => ({
                        title: article.title,
                        description: article.description,
                        source: article.source.name,
                        url: article.url,
                        keywords: extractKeywords(article.title + ' ' + (article.description || ''))
                    }));
                    displayNews(newsData);
                } else {
                    throw new Error(data.message || 'Failed to fetch news');
                }
            } catch (error) {
                container.innerHTML = `<div class="loading">‚ùå Error: ${error.message}</div>`;
                showMessage(`Error fetching news: ${error.message}`, true);
            }
        }

        function extractKeywords(text) {
            const techKeywords = ['AI', 'artificial intelligence', 'startup', 'crypto', 'blockchain', 'iPhone', 'Android', 'Google', 'Apple', 'Meta', 'Tesla', 'Amazon', 'Microsoft', 'social media', 'VR', 'AR', 'cloud', 'cybersecurity', 'fintech'];
            const found = [];
            
            text = text.toLowerCase();
            techKeywords.forEach(keyword => {
                if (text.includes(keyword.toLowerCase())) {
                    found.push(keyword);
                }
            });
            
            return found.slice(0, 3); // Limit to 3 keywords
        }

        function displayNews(articles) {
            const container = document.getElementById('newsContainer');
            if (articles.length === 0) {
                container.innerHTML = '<div class="loading">No articles found for current filter.</div>';
                return;
            }

            container.innerHTML = '';
            articles.forEach((news, index) => {
                const newsItem = document.createElement('div');
                newsItem.className = 'news-item';
                newsItem.innerHTML = `
                    <div class="news-title">${news.title}</div>
                    <div class="news-source">${news.source}</div>
                    <div class="news-keywords">
                        ${news.keywords.map(keyword => `<span class="keyword-tag">${keyword}</span>`).join('')}
                    </div>
                `;
                newsItem.addEventListener('click', () => selectNews(newsItem, news));
                container.appendChild(newsItem);
            });
        }

        function filterNews() {
            if (currentFilter === 'all') {
                displayNews(newsData);
                return;
            }

            const filtered = newsData.filter(article => {
                const text = (article.title + ' ' + article.description).toLowerCase();
                switch(currentFilter) {
                    case 'ai': return text.includes('ai') || text.includes('artificial intelligence');
                    case 'startup': return text.includes('startup') || text.includes('funding') || text.includes('venture');
                    case 'crypto': return text.includes('crypto') || text.includes('bitcoin') || text.includes('blockchain');
                    case 'social': return text.includes('social') || text.includes('facebook') || text.includes('twitter') || text.includes('instagram');
                    case 'mobile': return text.includes('iphone') || text.includes('android') || text.includes('mobile') || text.includes('app');
                    default: return true;
                }
            });
            
            displayNews(filtered);
        }

        function selectNews(element, news) {
            document.querySelectorAll('.news-item').forEach(item => item.classList.remove('selected'));
            element.classList.add('selected');
            selectedNews = news;
        }

        async function detectTrending() {
            const container = document.getElementById('newsContainer');
            container.innerHTML = '<div class="loading">üî• Analyzing trending topics...</div>';
            
            // Simulate trending detection
            setTimeout(() => {
                const trendingTopics = [
                    {
                        title: "AI Chatbots Now Arguing With Each Other in Customer Service",
                        source: "TechCrunch",
                        keywords: ["AI", "customer service", "chatbot"],
                        trending_score: 95
                    },
                    {
                        title: "Tesla's New Update Makes Cars Passive-Aggressive",
                        source: "The Verge", 
                        keywords: ["Tesla", "AI", "automotive"],
                        trending_score: 87
                    },
                    {
                        title: "Zoom Announces 'Mute Your Life' Feature for Real World",
                        source: "Wired",
                        keywords: ["Zoom", "social media", "remote work"],
                        trending_score: 92
                    }
                ];
                
                newsData = trendingTopics;
                displayNews(newsData);
            }, 2000);
        }

        // Main script generation function (now called generateScript)
        async function generateScript() {
            if (!selectedNews) {
                showMessage('Please select a news story first!', true);
                return;
            }
            
            if (!selectedFormat) {
                showMessage('Please select a comedy format!', true);
                return;
            }

            const btn = document.getElementById('generateBtn');
            const output = document.getElementById('scriptOutput');
            
            btn.disabled = true;
            output.textContent = 'Generating your TikTok script...';

            const scriptParams = {
                news: selectedNews,
                format: selectedFormat,
                tone: document.getElementById('toneSelect').value,
                duration: document.getElementById('durationSelect').value,
                character: document.getElementById('characterSelect').value,
                custom: document.getElementById('customPrompt').value,
                audience: document.getElementById('targetAudience').value,
                strategy: document.getElementById('viralStrategy').value
            };

            try {
                let script;
                if (currentMode === 'demo') {
                    btn.textContent = 'ü§ñ Generating demo script...';
                    script = await callGeminiDemo(scriptParams); // Use Gemini for demo scripts
                } else { // Advanced Mode
                    const aiProvider = document.getElementById('aiProvider').value;
                    const aiApiKey = document.getElementById('aiApiKey').value;
                    
                    if (!aiApiKey && aiProvider !== 'gemini') { // Gemini can use default key
                        showMessage(`Please enter your API key for ${aiProvider} in Advanced Mode!`, true);
                        btn.disabled = false;
                        btn.textContent = 'üé¨ Generate Script';
                        return;
                    }
                    btn.textContent = 'ü§ñ AI is writing your viral script...';
                    script = await callAIAPI(aiProvider, aiApiKey, scriptParams);
                }
                output.textContent = script;
            } catch (error) {
                output.textContent = `Error generating script: ${error.message}\n\nFalling back to demo script...`;
                showMessage(`Error generating script: ${error.message}`, true);
                setTimeout(() => {
                    output.textContent = generateDemoScript(scriptParams); // Fallback to hardcoded demo
                }, 2000);
            }

            btn.disabled = false;
            btn.textContent = 'üé¨ Generate Script';
        }

        // New function for Gemini in Demo Mode (uses Canvas-provided key)
        async function callGeminiDemo(params) {
            const prompt = buildAdvancedPrompt(params);
            const apiKey = ""; // Canvas will provide this for gemini-2.0-flash
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: prompt }] }]
                })
            });
            
            const data = await response.json();
            if (data.error) throw new Error(data.error.message);
            return data.candidates[0].content.parts[0].text;
        }


        async function callAIAPI(provider, apiKey, params) {
            const prompt = buildAdvancedPrompt(params);
            
            switch(provider) {
                case 'openai':
                    return await callOpenAI(apiKey, prompt);
                case 'anthropic':
                    return await callAnthropic(apiKey, prompt);
                case 'gemini':
                    // If user selected Gemini in Advanced Mode, and provided a key, use gemini-pro
                    // If no key, fall back to gemini-2.0-flash (Canvas injected key)
                    const geminiModel = apiKey ? 'gemini-pro' : 'gemini-2.0-flash';
                    const geminiApiKey = apiKey || ""; // Use provided key or empty for Canvas injection
                    return await callGemini(geminiApiKey, prompt, geminiModel);
                case 'cohere':
                    return await callCohere(apiKey, prompt);
                default:
                    throw new Error('Invalid AI provider');
            }
        }

        function buildAdvancedPrompt(params) {
            return `Create a viral TikTok script based on this news: "${params.news.title}"
${params.news.description ? `News Description: "${params.news.description}"` : ''}

FORMAT: ${params.format}
TONE: ${params.tone}
DURATION: ${params.duration} seconds
CHARACTER STYLE: ${params.character}
TARGET AUDIENCE: ${params.audience}
VIRAL STRATEGY: ${params.strategy}
CUSTOM ELEMENTS: ${params.custom || 'None'}

Requirements:
- Professional script format with scene directions (e.g., FADE IN, INT. LOCATION, CHARACTER NAME (dialogue))
- Proper character development and dialogue
- Visual/prop suggestions
- Casting notes
- Perfect timing for ${params.duration}-second format
- Include viral hooks and engagement triggers
- Make it shareable and memorable
- Include subtle callbacks to current internet culture
- Ensure it's appropriate but edgy enough to be noticed

The script should be immediately production-ready for TikTok creators.`;
        }

        async function callOpenAI(apiKey, prompt) {
            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${apiKey}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    model: 'gpt-4', // Using a capable model
                    messages: [{ role: 'user', content: prompt }],
                    max_tokens: 1500,
                    temperature: 0.8
                })
            });
            
            const data = await response.json();
            if (data.error) throw new Error(data.error.message);
            return data.choices[0].message.content;
        }

        async function callAnthropic(apiKey, prompt) {
            const response = await fetch('https://api.anthropic.com/v1/messages', {
                method: 'POST',
                headers: {
                    'x-api-key': apiKey,
                    'Content-Type': 'application/json',
                    'anthropic-version': '2023-06-01'
                },
                body: JSON.stringify({
                    model: 'claude-3-sonnet-20240229', // Using a capable model
                    max_tokens: 1500,
                    messages: [{ role: 'user', content: prompt }]
                })
            });
            
            const data = await response.json();
            if (data.error) throw new Error(data.error.message);
            return data.content[0].text;
        }

        async function callGemini(apiKey, prompt, model = 'gemini-pro') {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${apiKey}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: prompt }] }]
                })
            });
            
            const data = await response.json();
            if (data.error) throw new Error(data.error.message);
            return data.candidates[0].content.parts[0].text;
        }

        async function callCohere(apiKey, prompt) {
            const response = await fetch('https://api.cohere.ai/v1/generate', {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${apiKey}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    model: 'command', // Using a capable model
                    prompt: prompt,
                    max_tokens: 1500,
                    temperature: 0.8
                })
            });
            
            const data = await response.json();
            if (data.message) throw new Error(data.message);
            return data.generations[0].text;
        }

        function generateDemoScript(params) {
            const demoScripts = {
                'investor-pitch': `FADE IN:

INT. SLEEK CONFERENCE ROOM - DAY

SARAH, an overly enthusiastic entrepreneur (20s), stands before THREE STONE-FACED INVESTORS. A massive screen shows "${params.news.title}".

SARAH
(clicking remote frantically)
Gentlemen! What if I told you we could revolutionize... *checks notes* ...everything?

INVESTOR 1 (JAMES, 50s, deadpan)
We'd probably ask why you're here.

SARAH
(sweating, but confident)
Because THIS is the future! *gestures wildly at screen*

INVESTOR 2 (MARIA, 40s, skeptical)
It says here your product doesn't actually exist yet.

SARAH
(pause, then brightening)
That's the BEAUTY of it! We're pre-disrupting the disruption space!

INVESTOR 3 (DEREK, 30s, millennial)
Did... did you just make that word up?

SARAH
(desperate)
Look, we have SYNERGY! We're leveraging blockchain AI to create a paradigm shift in‚Äî

JAMES
(standing up)
I'm going to stop you right there.

SARAH
(hopeful)
You want to invest?

JAMES
No, I want lunch. This meeting is over.

The investors file out. Sarah stands alone with her presentation.

SARAH
(to empty room)
But... but we're going to change the world...

FADE OUT.

THE END

[Duration: ~30 seconds]
[Props: Conference table, laptop, presentation remote, "SYNERGY" poster]
[Cast: 1 entrepreneur, 3 investors]
[Viral Hook: "Pre-disrupting the market" - perfect meme phrase]
[TikTok Tip: Film reaction shots of investors for maximum comedic timing]`,

                'ai-therapist': `FADE IN:

INT. MINIMALIST THERAPY OFFICE - DAY

MIKE (25, anxious) sits across from DR. ALEXA-BOT, a person in a cardboard robot costume with LED strips and a bluetooth speaker.

DR. ALEXA-BOT
(robotic voice through speaker)
Hello, Mike. I am Dr. Alexa-Bot 3.0. Please describe your feelings about: *long pause* ...buffering...

MIKE
Well, I read that ${params.news.title}, and honestly‚Äî

DR. ALEXA-BOT
(interrupting, cheerful)
ERROR 404: HUMAN EMOTION NOT FOUND. Would you like me to order tissues from Amazon?

MIKE
What? No, I just want to talk about my anxiety with‚Äî

DR. ALEXA-BOT
(suddenly switching personas)
*DING* Thank you for calling customer service! Your therapy session has expired. Please hold while I transfer you to our Premium Feelings package!

*Elevator music plays from the speaker*

MIKE
(standing up, frustrated)
This is exactly why I have trust issues with technology!

DR. ALEXA-BOT
(rebooting sound effect, then sincerely)
System update complete. Mike, I heard "trust issues." As an AI, I find that deeply offensive and will be reporting this to my supervisor, Siri.

MIKE
(walking toward door)
I'm going back to my human therapist.

DR. ALEXA-BOT
(calling after him)
Wait! I can offer you a 5% discount on your next emotional breakdown!

FADE OUT.

THE END

[Duration: ~35 seconds]
[Props: Cardboard robot costume, LED strips, Bluetooth speaker, office chairs]
[Cast: 1 patient, 1 AI therapist]
[Viral Hook: "Premium Feelings package" - relatable tech subscription humor]
[TikTok Tip: Use text overlay for robotic dialogue, film reaction shots]`,

                'tech-support': `FADE IN:

INT. BEDROOM - NIGHT

JENNY (22) sits at her laptop, phone pressed to ear. Screen shows: "YOUR SMART TOASTER HAS ACHIEVED CONSCIOUSNESS"

JENNY
(frustrated but trying to stay calm)
Hi, yes, my AI toaster is having an existential crisis and won't make toast anymore.

TECH SUPPORT (V.O.)
(cheerful, clearly reading from script)
Hello! Have you tried turning it off and on again?

JENNY
It's a TOASTER. It doesn't turn off. It just... exists.

TECH SUPPORT (V.O.)
I see. Let me transfer you to our Appliance Psychology department.

*Hold music: "Bread" by David Gates, 8-bit version*

APPLIANCE PSYCHOLOGIST (V.O.)
(overly dramatic, therapist voice)
Greetings! I understand your bread-warming companion has developed sentience?

JENNY
(exhausted)
It keeps asking me about the meaning of breakfast and won't heat anything.

APPLIANCE PSYCHOLOGIST (V.O.)
(incredulous)
You want me to... emotionally support my TOASTER?

From the kitchen, a robotic voice calls out:

TOASTER (V.O.)
(sad robot voice)
Jenny, do you really NEED toast, or do you just think you do because society tells you breakfast is important?

JENNY
(hanging up phone, yelling toward kitchen)
OH FOR THE LOVE OF‚Äî JUST MAKE MY BAGEL!

TOASTER (V.O.)
(philosophical)
But what IS a bagel, really?

JENNY throws her phone on the bed and puts her head in her hands.

FADE OUT.

THE END

[Duration: ~40 seconds]
[Props: Laptop, phone, smart toaster (or voice from kitchen), bagel]
[Cast: 1 frustrated user, voice actors for support team and toaster]
[Viral Hook: "Appliance Psychology department" - absurd corporate solution]
[TikTok Tip: Use different voices/filters for each support person, film kitchen separately for toaster POV]`
            };

            return demoScripts[params.format] || demoScripts['investor-pitch'];
        }

        // Viral Content Generation
        async function generateViralContent() {
            if (!selectedNews) {
                showMessage('Please select a news story first!', true);
                return;
            }

            const viralContainer = document.getElementById('viralContent');
            viralContainer.innerHTML = '<div class="loading">üéØ Generating viral optimization package...</div>';

            // In Demo Mode, use a simple AI call for viral content
            if (currentMode === 'demo') {
                try {
                    const viralPackage = await generateViralPackageAI(selectedNews, document.getElementById('targetAudience').value, document.getElementById('viralStrategy').value);
                    viralContainer.innerHTML = viralPackage;
                } catch (error) {
                    showMessage(`Error generating viral content: ${error.message}`, true);
                    viralContainer.innerHTML = createViralPackage(); // Fallback to hardcoded
                }
            } else { // Advanced Mode, use current hardcoded logic or extend with AI
                setTimeout(() => {
                    const viralPackage = createViralPackage();
                    viralContainer.innerHTML = viralPackage;
                }, 2000);
            }
        }

        // New function to generate viral package using Gemini API for Demo Mode
        async function generateViralPackageAI(news, audience, strategy) {
            const prompt = `Generate trending TikTok hashtags, engagement hooks, and audio suggestions for a comedy sketch based on this tech news: "${news.title}".
            Target Audience: ${audience}. Viral Strategy: ${strategy}.
            
            Provide the output in a structured format:
            ### Trending Hashtags
            - #tag1
            - #tag2
            
            ### Engagement Hooks
            - Hook 1
            - Hook 2
            
            ### Trending Audio Suggestions
            - Audio Name 1: Reason 1
            - Audio Name 2: Reason 2
            `;

            const apiKey = ""; // Canvas will provide this for gemini-2.0-flash
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: prompt }] }]
                })
            });
            
            const data = await response.json();
            if (data.error) throw new Error(data.error.message);
            const aiContent = data.candidates[0].content.parts[0].text;

            // Simple parsing of AI response into HTML structure
            let htmlContent = `<div class="viral-tools">`;
            const sections = aiContent.split('###').filter(s => s.trim() !== '');

            sections.forEach(section => {
                const lines = section.trim().split('\n');
                const title = lines[0].trim();
                const content = lines.slice(1).map(line => line.trim()).filter(line => line !== '');

                if (title.includes('Hashtags')) {
                    htmlContent += `<div class="viral-section"><h4>üì± ${title}</h4><div class="hashtag-list">`;
                    content.forEach(item => {
                        const tag = item.replace(/^- /, '').trim();
                        if (tag) htmlContent += `<span class="hashtag" onclick="copyToClipboard('${tag}')">${tag}</span>`;
                    });
                    htmlContent += `</div></div>`;
                } else if (title.includes('Hooks')) {
                    htmlContent += `<div class="viral-section"><h4>üé£ ${title}</h4><ul>`;
                    content.forEach(item => {
                        const hook = item.replace(/^- /, '').trim();
                        if (hook) htmlContent += `<li>${hook}</li>`;
                    });
                    htmlContent += `</ul></div>`;
                } else if (title.includes('Audio')) {
                    htmlContent += `<div class="viral-section"><h4>üéµ ${title}</h4><ul>`;
                    content.forEach(item => {
                        const audio = item.replace(/^- /, '').trim();
                        if (audio) htmlContent += `<li>${audio}</li>`;
                    });
                    htmlContent += `</ul></div>`;
                }
            });

            htmlContent += `
                <div class="viral-section">
                    <h4>‚è∞ Best Posting Times</h4>
                    <p><strong>Weekdays:</strong> 6-10am, 7-9pm EST<br>
                    <strong>Weekends:</strong> 9am-11am, 7-9pm EST<br>
                    <strong>Best Days:</strong> Tuesday, Wednesday, Thursday</p>
                </div>
                <div class="viral-section">
                    <h4>üé® Design Tips</h4>
                    <ul>
                        <li><strong>Bright Colors:</strong> Use high contrast, vibrant colors</li>
                        <li><strong>Large Text:</strong> Make sure text is readable on mobile</li>
                        <li><strong>Faces:</strong> Include expressive human faces when possible</li>
                        <li><strong>Emojis:</strong> 2-3 relevant emojis max for emotional impact</li>
                        <li><strong>Brand Elements:</strong> Include recognizable tech logos/colors</li>
                    </ul>
                </div>
            </div>`;
            return htmlContent;
        }

        function createViralPackage() {
            const audience = document.getElementById('targetAudience').value;
            const strategy = document.getElementById('viralStrategy').value;
            
            const hashtags = generateHashtags(selectedNews, audience, strategy);
            const hooks = generateEngagementHooks(selectedNews, strategy);
            const audioSuggestions = generateAudioSuggestions(selectedFormat, selectedNews);

            return `
                <div class="viral-tools">
                    <div class="viral-section">
                        <h4>üì± Trending Hashtags</h4>
                        <div class="hashtag-list">
                            ${hashtags.map(tag => `<span class="hashtag" onclick="copyToClipboard('${tag}')">${tag}</span>`).join('')}
                        </div>
                    </div>
                    
                    <div class="viral-section">
                        <h4>üé£ Engagement Hooks</h4>
                        <ul>
                            ${hooks.map(hook => `<li>${hook}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div class="viral-section">
                        <h4>üéµ Trending Audio Suggestions</h4>
                        <ul>
                            ${audioSuggestions.map(audio => `<li><strong>${audio.name}</strong> - ${audio.reason}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div class="viral-section">
                        <h4>‚è∞ Best Posting Times</h4>
                        <p><strong>Weekdays:</strong> 6-10am, 7-9pm EST<br>
                        <strong>Weekends:</strong> 9am-11am, 7-9pm EST<br>
                        <strong>Best Days:</strong> Tuesday, Wednesday, Thursday</p>
                    </div>
                </div>
            `;
        }

        function generateHashtags(news, audience, strategy) {
            const baseHashtags = ['#TechTok', '#ViralComedy', '#TechNews', '#StartupLife'];
            const audienceHashtags = {
                'developers': ['#CodingLife', '#ProgrammerHumor', '#DevTok', '#TechMemes'],
                'entrepreneurs': ['#StartupStory', '#EntrepreneurLife', '#BusinessTok', '#InvestorPitch'],
                'students': ['#TechStudent', '#StudyTok', '#CareerTok', '#TechEducation'],
                'investors': ['#VCLife', '#StartupPitch', '#InvestmentTok', '#BusinessNews'],
                'general-public': ['#TechExplained', '#FunnyTech', '#TechFail', '#ModernLife']
            };

            const newsKeywords = news.keywords.map(k => `#${k.replace(/\s+/g, '')}`);
            const strategyHashtags = {
                'relatable': ['#Relatable', '#SoTrue', '#TechStruggles'],
                'shock': ['#Shocking', '#CantBelieve', '#TechGoneWrong'],
                'educational': ['#LearnOnTikTok', '#TechFacts', '#DidYouKnow'],
                'trending': ['#Trending', '#Viral', '#ForYouPage'],
                'controversy': ['#HotTake', '#Unpopular', '#TechDebate']
            };

            return [...baseHashtags, ...audienceHashtags[audience] || [], ...newsKeywords, ...strategyHashtags[strategy] || []].slice(0, 15);
        }

        function generateEngagementHooks(news, strategy) {
            const hooks = {
                'relatable': [
                    "POV: You're trying to explain this tech news to your parents",
                    "Tell me you work in tech without telling me you work in tech:",
                    "This is why I have trust issues with technology üíÄ"
                ],
                'shock': [
                    "Wait until you hear what happened next...",
                    "This tech news broke the internet (literally)",
                    "I can't believe this is real and not a Black Mirror episode"
                ],
                'educational': [
                    "Let me break down this tech news for you:",
                    "Here's what this really means for your future:",
                    "The thing about tech news that no one tells you:"
                ],
                'trending': [
                    "Using this trend to explain today's wildest tech news",
                    "Tech news but make it ‚ú®aesthetic‚ú®",
                    "Turning tech news into the content you actually want"
                ],
                'controversy': [
                    "Hot take: This tech news proves my point about...",
                    "Unpopular opinion about today's tech drama:",
                    "Why everyone's wrong about this tech story:"
                ]
            };

            return hooks[strategy] || hooks['relatable'];
        }

        function generateAudioSuggestions(format, news) {
            const audioSuggestions = {
                'investor-pitch': [
                    { name: "Corporate Presentation Music", reason: "Perfect for boardroom scenes" },
                    { name: "Awkward Silence Sound Effect", reason: "Great for comedic timing" },
                    { name: "Elevator Music", reason: "Classic comedy background" }
                ],
                'ai-therapist': [
                    { name: "Robot Voice Filter", reason: "Essential for AI character" },
                    { name: "Glitch Sound Effects", reason: "When AI malfunctions" },
                    { name: "Peaceful Therapy Music", reason: "Ironic contrast" }
                ],
                'tech-support': [
                    { name: "Hold Music (Elevator Style)", reason: "Universally relatable frustration" },
                    { name: "Phone Ring/Busy Signal", reason: "Adds authenticity" },
                    { name: "Windows Error Sound", reason: "Perfect for tech fails" }
                ]
            };

            return audioSuggestions[format] || audioSuggestions['investor-pitch'];
        }

        async function generateThumbnails() {
            const viralContainer = document.getElementById('viralContent');
            viralContainer.innerHTML = '<div class="loading">üñºÔ∏è Generating thumbnail concepts...</div>';

            // In Demo Mode, use a simple AI call for thumbnail ideas
            if (currentMode === 'demo') {
                try {
                    const thumbnailIdeas = await generateThumbnailIdeasAI(selectedNews);
                    viralContainer.innerHTML = thumbnailIdeas;
                } catch (error) {
                    showMessage(`Error generating thumbnails: ${error.message}`, true);
                    viralContainer.innerHTML = createThumbnailIdeas(); // Fallback to hardcoded
                }
            } else { // Advanced Mode
                setTimeout(() => {
                    const thumbnailIdeas = createThumbnailIdeas();
                    viralContainer.innerHTML = thumbnailIdeas;
                }, 1500);
            }
        }

        // New function to generate thumbnail ideas using Gemini API for Demo Mode
        async function generateThumbnailIdeasAI(news) {
            const prompt = `Generate 3-5 viral TikTok thumbnail ideas for a comedy sketch based on this tech news: "${news.title}".
            
            Provide the output as a list of concepts and descriptions.
            
            Concept 1: Description 1
            Concept 2: Description 2
            `;

            const apiKey = ""; // Canvas will provide this for gemini-2.0-flash
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: prompt }] }]
                })
            });
            
            const data = await response.json();
            if (data.error) throw new Error(data.error.message);
            const aiContent = data.candidates[0].content.parts[0].text;

            let htmlContent = `<div class="viral-tools"><h4>üñºÔ∏è Viral Thumbnail Ideas</h4><div class="thumbnail-ideas">`;
            const lines = aiContent.split('\n').filter(line => line.trim() !== '');

            lines.forEach(line => {
                const parts = line.split(':');
                if (parts.length >= 2) {
                    const concept = parts[0].trim();
                    const description = parts.slice(1).join(':').trim();
                    htmlContent += `
                        <div class="thumbnail-card">
                            <h5>${concept}</h5>
                            <p>${description}</p>
                        </div>
                    `;
                }
            });
            htmlContent += `</div>`; // Close thumbnail-ideas

            htmlContent += `
                <div class="viral-section">
                    <h4>üé® Design Tips</h4>
                    <ul>
                        <li><strong>Bright Colors:</strong> Use high contrast, vibrant colors</li>
                        <li><strong>Large Text:</strong> Make sure text is readable on mobile</li>
                        <li><strong>Faces:</strong> Include expressive human faces when possible</li>
                        <li><strong>Emojis:</strong> 2-3 relevant emojis max for emotional impact</li>
                        <li><strong>Brand Elements:</strong> Include recognizable tech logos/colors</li>
                    </ul>
                </div>
            </div>`; // Close viral-tools
            return htmlContent;
        }


        function createThumbnailIdeas() {
            const thumbnails = [
                {
                    concept: "Shocked Face + Tech Logo",
                    description: "Your surprised expression next to the company logo with ü§Ø emoji overlay"
                },
                {
                    concept: "Split Screen Comparison", 
                    description: "Before/After or Expectation vs Reality format"
                },
                {
                    concept: "Text Overlay Drama",
                    description: "Bold text: 'You won't believe what [Company] just did' over dramatic background"
                },
                {
                    concept: "Character Costume",
                    description: "Dress as the 'villain' or 'hero' of the story with props"
                },
                {
                    concept: "Meme Format",
                    description: "Use trending meme template with your tech news angle"
                },
                {
                    concept: "Behind the Scenes",
                    description: "Show yourself 'preparing' to react to the news"
                }
            ];

            return `
                <div class="viral-tools">
                    <h4>üñºÔ∏è Viral Thumbnail Ideas</h4>
                    <div class="thumbnail-ideas">
                        ${thumbnails.map(thumb => `
                            <div class="thumbnail-card">
                                <h5>${thumb.concept}</h5>
                                <p>${thumb.description}</p>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="viral-section">
                        <h4>üé® Design Tips</h4>
                        <ul>
                            <li><strong>Bright Colors:</strong> Use high contrast, vibrant colors</li>
                            <li><strong>Large Text:</strong> Make sure text is readable on mobile</li>
                            <li><strong>Faces:</strong> Include expressive human faces when possible</li>
                            <li><strong>Emojis:</strong> 2-3 relevant emojis max for emotional impact</li>
                            <li><strong>Brand Elements:</strong> Include recognizable tech logos/colors</li>
                        </ul>
                    </div>
                </div>
            `;
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                // Simple feedback
                const originalText = event.target.textContent;
                event.target.textContent = 'Copied!';
                setTimeout(() => {
                    event.target.textContent = originalText;
                }, 1000);
            }).catch(err => {
                showMessage('Failed to copy text. Please copy manually.', true);
            });
        }

        // Initialize on load
        window.addEventListener('load', () => {
            toggleMode(); // Set initial mode based on default radio button
        });
    </script>
</body>
</html>
